<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crypto Table</title>
</head>
<body>
    <h1>Crypto Table</h1>
    <div>
        <a href="/manage">管理代币</a>
    </div>
    <table>
        <thead>
            <tr>
                <th>Coin Name</th>
                <th>Price</th>
                <th>Current Supply</th>
                <th>Current Market Cap</th>
                <th>Total Supply</th>
                <th>Total Market Cap</th>
                <th>Last Updated</th>
                <th>Found Raises</th>
                <th>Investor Percentage</th>
                <th>Financing Valuation</th>
                <th>Financing Based Price</th>
                <th>Annualized Income</th>
                <th>Income Valuation</th>
                <th>Income Based Price</th>
                <th>Tokenomics</th>
                <th>Vesting</th>
                <th>CEXs</th>
            </tr>
        </thead>
        <tbody id="table-body">
            {% for row in table_data %}
            <tr>
                <td>{{ row.coin_name }}</td>
                <td>{{ row.price }}</td>
                <td>{{ row.current_supply }}</td>
                <td>{{ row.current_market_cap }}</td>
                <td>{{ row.total_supply }}</td>
                <td>{{ row.total_market_cap }}</td>
                <td>{{ row.last_updated }}</td>
                <td>{{ row.found_raises }}</td>
                <td>{{ row.investor_percentage }}</td>
                <td>{{ row.financing_valuation }}</td>
                <td>{{ row.financing_based_price }}</td>
                <td>{{ row.annualized_income }}</td>
                <td>{{ row.income_valuation }}</td>
                <td>{{ row.income_based_price }}</td>
                <td>{{ row.tokenomics }}</td>
                <td>{{ row.vesting }}</td>
                <td>{{ row.cexs }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <script>
        function updateTable() {
            fetch('/api/data')
                .then(response => response.json())
                .then(data => {
                    const tableBody = document.getElementById('table-body');
                    tableBody.innerHTML = '';
                    data.forEach(row => {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td>${row.coin_name}</td>
                            <td>${row.price}</td>
                            <td>${row.current_supply}</td>
                            <td>${row.current_market_cap}</td>
                            <td>${row.total_supply}</td>
                            <td>${row.total_market_cap}</td>
                            <td>${row.last_updated || ''}</td>
                            <td>${row.found_raises}</td>
                            <td>${row.investor_percentage}</td>
                            <td>${row.financing_valuation}</td>
                            <td>${row.financing_based_price}</td>
                            <td>${row.annualized_income}</td>
                            <td>${row.income_valuation}</td>
                            <td>${row.income_based_price}</td>
                            <td>${row.tokenomics}</td>
                            <td>${row.vesting}</td>
                            <td>${row.cexs}</td>
                        `;
                        tableBody.appendChild(tr);
                    });
                });
        }
        updateTable();
        setInterval(updateTable, 60000); // 每1分钟更新
    </script>
</body>
</html>